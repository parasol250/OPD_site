{"ast":null,"code":"import React,{useState,useEffect}from'react';import Header from'./components/Header';import ProductList from'./components/ProductList';import FilterSidebar from'./components/FilterSidebar';import Popup from'./components/popup';import'./App.css';import ReactDOM from'react-dom/client';import{BrowserRouter,Route,Routes,useParams}from'react-router-dom';import CategoryPage from'./components/CategoryPage';import items from'./database.js';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function App(){const[products,setProducts]=useState([]);const[filters,setFilters]=useState({});const[searchTerm,setSearchTerm]=useState('');// Добавили state для поиска\nconst[isPopupOpen,setIsPopupOpen]=useState(false);// State для открытия/закрытия popup\nconst[isLoggedIn,setIsLoggedIn]=useState(false);// Состояние аутентификации (пример)\nconst[loading,setLoading]=useState(true);const[selectedCategory,setSelectedCategory]=useState(null);// State for selected category\n// Имитация API вызова (замените реальным API)\nuseEffect(()=>{const fetchData=async()=>{//Здесь нужно использовать реальный адрес API\n// const response = await fetch('https://example.com/api/products');\n// const data = await response.json();\n// setProducts(data);\n// Временные данные для примера\nconst data=items;//[\n//   { id: 1, name: 'Диван', price: 50000, image: 'https://via.placeholder.com/150', store: 'Store 1', link: 'https://example.com/product1', category: 'Диваны и кресла' },\n//   { id: 2, name: 'Кресло', price: 25000, image: 'https://via.placeholder.com/150', store: 'Store 2', link: 'https://example.com/product2', category: 'Диваны и кресла' },\n//   { id: 3, name: 'Стол', price: 30000, image: 'https://via.placeholder.com/150', store: 'Store 1', link: 'https://example.com/product3', category: 'Столы и стулья' },\n//   { id: 4, name: 'Диван угловой', price: 70000, image: 'https://via.placeholder.com/150', store: 'Store 3', link: 'https://example.com/product4', category: 'Диваны и кресла' },\n//   { id: 5, name: 'Шкаф', price: 40000, image: 'https://via.placeholder.com/150', store: 'Store 2', link: 'https://example.com/product5', category: 'Шкафы и стеллажи' },\n//   { id: 6, name: 'Кровать', price: 60000, image: 'https://via.placeholder.com/150', store: 'Store 1', link: 'https://example.com/product6', category: 'Кровати и матрасы' },\n//   { id: 7, name: 'Тумбочка', price: 15000, image: 'https://via.placeholder.com/150', store: 'Store 3', link: 'https://example.com/product7', category: 'Тумбы и комоды' },\n//   { id: 8, name: 'Стул', price: 10000, image: 'https://via.placeholder.com/150', store: 'Store 2', link: 'https://example.com/product8', category: 'Столы и стулья' },\n//   { id: 9, name: 'Детская кроватка', price: 35000, image: 'https://via.placeholder.com/150', store: 'Store 1', link: 'https://example.com/product9', category: 'Детская мебель' },\n//   { id: 10, name: 'Комод', price: 28000, image: 'https://via.placeholder.com/150', store: 'Store 3', link: 'https://example.com/product10', category: 'Тумбы и комоды' },\n// ];\nsetProducts(data);setLoading(false);};fetchData();},[]);const handleFilterChange=newFilters=>{setFilters(newFilters);//Здесь нужно реализовать отправку фильтров на API\n//И обновить стейт products на основе результатов\nconsole.log('New filters:',newFilters);};const handleSearch=term=>{// Добавили обработчик поиска\nsetSearchTerm(term);};const handleOpenPopup=()=>{// Функция для открытия всплывающего окна\nsetIsPopupOpen(true);};const handleClosePopup=()=>{// Функция для закрытия всплывающего окна\nsetIsPopupOpen(false);};// New function to handle login from Popup\nconst handleLogin=()=>{setIsLoggedIn(true);setIsPopupOpen(false);// close the popup after successful login\n};// New function to handle register from Popup (just close popup as example)\nconst handleRegister=()=>{setIsLoggedIn(true);setIsPopupOpen(false);// close the popup after successful register, also login as example\n};setTimeout(()=>{const filteredProducts=products.filter(product=>{//Тут нужно реализовать логику фильтрации\n//Основываясь на filters. Будет работать только если\n//Имитированный API возвращает данные в правильном формате\nconst searchTermLower=searchTerm.toLowerCase();const productNameLower=product.name.toLowerCase();const searchMatch=productNameLower.includes(searchTermLower);// Фильтруем по названию\n// Category filter\nif(selectedCategory){return product.category===selectedCategory&&searchMatch;// Search only within selected category\n}else{return searchMatch;// Search across all products when no category is selected\n}});const handleCategoryClick=category=>{setSelectedCategory(category);// Set selected category\n};const CategoryPage=()=>{const{categoryName}=useParams();const categoryFilteredProducts=products.filter(product=>{const searchTermLower=searchTerm.toLowerCase();const productNameLower=product.name.toLowerCase();const searchMatch=productNameLower.includes(searchTermLower);return product.category===categoryName&&searchMatch;});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F: \",categoryName]}),categoryFilteredProducts.length>0?/*#__PURE__*/_jsx(ProductList,{products:categoryFilteredProducts}):/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0435\\u0442 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432 \\u0432 \\u0434\\u0430\\u043D\\u043D\\u043E\\u0439 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438.\"})]});};return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(Header,{onOpenPopup:handleOpenPopup,onSearch:handleSearch,isLoggedIn:isLoggedIn}),\" \",/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(ProductList,{products:filteredProducts})}),/*#__PURE__*/_jsx(Route,{path:\"/category/:categoryName\",element:/*#__PURE__*/_jsx(CategoryPage,{})})]})}),isPopupOpen&&/*#__PURE__*/_jsx(Popup,{isOpen:isPopupOpen,onClose:handleClosePopup,onLogin:handleLogin,onRegister:handleRegister})]})});},1000);};export default App;","map":{"version":3,"names":["React","useState","useEffect","Header","ProductList","FilterSidebar","Popup","ReactDOM","BrowserRouter","Route","Routes","useParams","CategoryPage","items","jsxs","_jsxs","jsx","_jsx","App","products","setProducts","filters","setFilters","searchTerm","setSearchTerm","isPopupOpen","setIsPopupOpen","isLoggedIn","setIsLoggedIn","loading","setLoading","selectedCategory","setSelectedCategory","fetchData","data","handleFilterChange","newFilters","console","log","handleSearch","term","handleOpenPopup","handleClosePopup","handleLogin","handleRegister","setTimeout","filteredProducts","filter","product","searchTermLower","toLowerCase","productNameLower","name","searchMatch","includes","category","handleCategoryClick","categoryName","categoryFilteredProducts","children","length","className","onOpenPopup","onSearch","path","element","isOpen","onClose","onLogin","onRegister"],"sources":["C:/Users/Yulia/OneDrive - Peter the Great St. Petersburg Polytechnical University/Рабочий стол/bound/OPD_site/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Header from './components/Header';\r\nimport ProductList from './components/ProductList';\r\nimport FilterSidebar from './components/FilterSidebar';\r\nimport Popup from './components/popup';\r\nimport './App.css';\r\nimport ReactDOM from 'react-dom/client';\r\nimport { BrowserRouter, Route, Routes, useParams } from 'react-router-dom';\r\nimport CategoryPage from './components/CategoryPage';\r\nimport items from './database.js'\r\n\r\nfunction App() {\r\n  const [products, setProducts] = useState([]);\r\n  const [filters, setFilters] = useState({});\r\n  const [searchTerm, setSearchTerm] = useState(''); // Добавили state для поиска\r\n  const [isPopupOpen, setIsPopupOpen] = useState(false); // State для открытия/закрытия popup\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false); // Состояние аутентификации (пример)\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedCategory, setSelectedCategory] = useState(null); // State for selected category\r\n\r\n  // Имитация API вызова (замените реальным API)\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      //Здесь нужно использовать реальный адрес API\r\n      // const response = await fetch('https://example.com/api/products');\r\n      // const data = await response.json();\r\n      // setProducts(data);\r\n\r\n      // Временные данные для примера\r\n      const data = items;//[\r\n      //   { id: 1, name: 'Диван', price: 50000, image: 'https://via.placeholder.com/150', store: 'Store 1', link: 'https://example.com/product1', category: 'Диваны и кресла' },\r\n      //   { id: 2, name: 'Кресло', price: 25000, image: 'https://via.placeholder.com/150', store: 'Store 2', link: 'https://example.com/product2', category: 'Диваны и кресла' },\r\n      //   { id: 3, name: 'Стол', price: 30000, image: 'https://via.placeholder.com/150', store: 'Store 1', link: 'https://example.com/product3', category: 'Столы и стулья' },\r\n      //   { id: 4, name: 'Диван угловой', price: 70000, image: 'https://via.placeholder.com/150', store: 'Store 3', link: 'https://example.com/product4', category: 'Диваны и кресла' },\r\n      //   { id: 5, name: 'Шкаф', price: 40000, image: 'https://via.placeholder.com/150', store: 'Store 2', link: 'https://example.com/product5', category: 'Шкафы и стеллажи' },\r\n      //   { id: 6, name: 'Кровать', price: 60000, image: 'https://via.placeholder.com/150', store: 'Store 1', link: 'https://example.com/product6', category: 'Кровати и матрасы' },\r\n      //   { id: 7, name: 'Тумбочка', price: 15000, image: 'https://via.placeholder.com/150', store: 'Store 3', link: 'https://example.com/product7', category: 'Тумбы и комоды' },\r\n      //   { id: 8, name: 'Стул', price: 10000, image: 'https://via.placeholder.com/150', store: 'Store 2', link: 'https://example.com/product8', category: 'Столы и стулья' },\r\n      //   { id: 9, name: 'Детская кроватка', price: 35000, image: 'https://via.placeholder.com/150', store: 'Store 1', link: 'https://example.com/product9', category: 'Детская мебель' },\r\n      //   { id: 10, name: 'Комод', price: 28000, image: 'https://via.placeholder.com/150', store: 'Store 3', link: 'https://example.com/product10', category: 'Тумбы и комоды' },\r\n      // ];\r\n      setProducts(data);\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleFilterChange = (newFilters) => {\r\n    setFilters(newFilters);\r\n    //Здесь нужно реализовать отправку фильтров на API\r\n    //И обновить стейт products на основе результатов\r\n    console.log('New filters:', newFilters);\r\n  };\r\n\r\n  const handleSearch = (term) => { // Добавили обработчик поиска\r\n    setSearchTerm(term);\r\n  };\r\n\r\n  const handleOpenPopup = () => { // Функция для открытия всплывающего окна\r\n    setIsPopupOpen(true);\r\n  };\r\n\r\n  const handleClosePopup = () => { // Функция для закрытия всплывающего окна\r\n    setIsPopupOpen(false);\r\n  };\r\n\r\n  // New function to handle login from Popup\r\n  const handleLogin = () => {\r\n    setIsLoggedIn(true);\r\n    setIsPopupOpen(false);  // close the popup after successful login\r\n  };\r\n\r\n    // New function to handle register from Popup (just close popup as example)\r\n  const handleRegister = () => {\r\n    setIsLoggedIn(true);\r\n    setIsPopupOpen(false);  // close the popup after successful register, also login as example\r\n  };\r\nsetTimeout(()=>{\r\n  const filteredProducts = products.filter(product => {\r\n    //Тут нужно реализовать логику фильтрации\r\n    //Основываясь на filters. Будет работать только если\r\n    //Имитированный API возвращает данные в правильном формате\r\n    const searchTermLower = searchTerm.toLowerCase();\r\n    const productNameLower = product.name.toLowerCase();\r\n    const searchMatch = productNameLower.includes(searchTermLower); // Фильтруем по названию\r\n    // Category filter\r\n    if (selectedCategory) {\r\n      return product.category === selectedCategory && searchMatch; // Search only within selected category\r\n    } else {\r\n      return searchMatch; // Search across all products when no category is selected\r\n    }\r\n  });\r\n\r\n  const handleCategoryClick = (category) => {\r\n    setSelectedCategory(category); // Set selected category\r\n  };\r\n\r\n  const CategoryPage = () => {\r\n    const { categoryName } = useParams();\r\n\r\n    const categoryFilteredProducts = products.filter(product => {\r\n      const searchTermLower = searchTerm.toLowerCase();\r\n      const productNameLower = product.name.toLowerCase();\r\n      const searchMatch = productNameLower.includes(searchTermLower);\r\n\r\n      return product.category === categoryName && searchMatch;\r\n    });\r\n    \r\n    return (\r\n      <div>\r\n        <h2>Категория: {categoryName}</h2>\r\n        {categoryFilteredProducts.length > 0 ? (\r\n          <ProductList products={categoryFilteredProducts} />\r\n        ) : (\r\n          <p>Нет товаров в данной категории.</p>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <BrowserRouter>\r\n    <div className=\"app-container\">\r\n      <Header\r\n      onOpenPopup={handleOpenPopup}\r\n      onSearch={handleSearch}\r\n      isLoggedIn={isLoggedIn}\r\n      /> {/* Передаем функцию в Header */}\r\n      <div className=\"main-content\">\r\n        <Routes>\r\n          <Route path=\"/\" element={<ProductList products={filteredProducts} />} />\r\n          <Route path=\"/category/:categoryName\" element={<CategoryPage />} />\r\n        </Routes>\r\n      </div>\r\n\r\n      {isPopupOpen && (\r\n        <Popup isOpen={isPopupOpen}\r\n        onClose={handleClosePopup}\r\n        onLogin={handleLogin}\r\n        onRegister={handleRegister}/>\r\n      )}\r\n    </div>\r\n    </BrowserRouter>\r\n  );\r\n}, 1000);\r\n};\r\n\r\nexport default App;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}