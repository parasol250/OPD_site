{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Yulia\\\\OneDrive - Peter the Great St. Petersburg Polytechnical University\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\bound\\\\OPD_site\\\\src\\\\components\\\\CategoryPage.js\",\n  _s = $RefreshSig$();\nimport { useParams } from 'react-router-dom';\nimport ProductList from './ProductList';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CategoryPage = ({\n  products,\n  searchTerm,\n  loading,\n  error,\n  currentUser,\n  favorites,\n  toggleFavorite,\n  filters\n}) => {\n  _s();\n  const {\n    categoryName\n  } = useParams();\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 7,\n      columnNumber: 26\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Error: \", error.message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 8,\n      columnNumber: 24\n    }, this);\n  }\n  const decodedCategoryName = decodeURIComponent(categoryName);\n  const getKeywordsForCategory = category => {\n    const keywordsMap = {\n      'Диваны и кресла': ['диван', 'кресло', 'софа', 'канапе'],\n      'Шкафы и стеллажи': ['шкаф', 'стеллаж', 'гардероб', 'полка'],\n      'Кровати и матрасы': ['кровать', 'матрас', 'спальня', 'изголовье'],\n      'Тумбы и комоды': ['тумба', 'комод', 'прикроватная', 'туалетная'],\n      'Столы и стулья': ['стол', 'стул', 'табурет', 'обеденный'],\n      'Детская мебель': ['детск', 'ребенок', 'кроватка', 'игровой']\n    };\n    return keywordsMap[category] || [category === null || category === void 0 ? void 0 : category.toLowerCase()];\n  };\n  const keywords = getKeywordsForCategory(decodedCategoryName);\n  const searchTermLower = searchTerm.toLowerCase();\n  const applyFilters = products => {\n    let result = [...products];\n    if (filters.price !== null) {\n      result = result.filter(p => {\n        const productPrice = p.price || 0;\n        return productPrice <= filters.price;\n      });\n    }\n    if (filters.material) {\n      result = result.filter(p => p.material === filters.material);\n    }\n    if (filters.color) {\n      result = result.filter(p => p.color === filters.color);\n    }\n    if (filters.dimensions) {\n      result = result.filter(p => p.dimensions === filters.dimensions);\n    }\n    if (filters.availability !== null) {\n      result = result.filter(p => p.availability === filters.availability);\n    }\n    if (filters.brand) {\n      result = result.filter(p => p.brand === filters.brand);\n    }\n    if (filters.shop_id) {\n      result = result.filter(p => p.shop_id === filters.shop_id);\n    }\n    return result;\n  };\n  const categoryFilteredProducts = products.filter(product => {\n    if (!product || !product.name) return false;\n    const productNameLower = (product.name || '').toLowerCase();\n    const productDescLower = (product.description || '').toLowerCase();\n    const productCategoryLower = (product.category || '').toLowerCase();\n    const matchesCategory = keywords.some(keyword => productNameLower.includes(keyword) || productCategoryLower.includes(keyword));\n    const matchesSearch = searchTermLower === '' || productNameLower.includes(searchTermLower) || productDescLower.includes(searchTermLower);\n    return matchesCategory && matchesSearch;\n  });\n  const fullyFilteredProducts = applyFilters(categoryFilteredProducts);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"category-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F: \", decodedCategoryName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), categoryFilteredProducts.length > 0 ? /*#__PURE__*/_jsxDEV(ProductList, {\n      products: fullyFilteredProducts,\n      currentUser: currentUser,\n      favorites: favorites,\n      toggleFavorite: toggleFavorite\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\u041D\\u0435\\u0442 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432 \\u0432 \\u0434\\u0430\\u043D\\u043D\\u043E\\u0439 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n};\n_s(CategoryPage, \"MGDD8sTUujKJP+spoqFXIbW1eyA=\", false, function () {\n  return [useParams];\n});\n_c = CategoryPage;\nexport default CategoryPage;\nvar _c;\n$RefreshReg$(_c, \"CategoryPage\");","map":{"version":3,"names":["useParams","ProductList","jsxDEV","_jsxDEV","CategoryPage","products","searchTerm","loading","error","currentUser","favorites","toggleFavorite","filters","_s","categoryName","children","fileName","_jsxFileName","lineNumber","columnNumber","message","decodedCategoryName","decodeURIComponent","getKeywordsForCategory","category","keywordsMap","toLowerCase","keywords","searchTermLower","applyFilters","result","price","filter","p","productPrice","material","color","dimensions","availability","brand","shop_id","categoryFilteredProducts","product","name","productNameLower","productDescLower","description","productCategoryLower","matchesCategory","some","keyword","includes","matchesSearch","fullyFilteredProducts","className","length","_c","$RefreshReg$"],"sources":["C:/Users/Yulia/OneDrive - Peter the Great St. Petersburg Polytechnical University/Рабочий стол/bound/OPD_site/src/components/CategoryPage.js"],"sourcesContent":["import { useParams } from 'react-router-dom';\r\nimport ProductList from './ProductList';\r\n\r\nconst CategoryPage = ({ products, searchTerm, loading, error, currentUser, favorites, toggleFavorite, filters }) => {\r\n    const { categoryName } = useParams();\r\n\r\n    if (loading) {return <div>Loading...</div>;}\r\n    if (error) {return <div>Error: {error.message}</div>;}\r\n\r\n    const decodedCategoryName = decodeURIComponent(categoryName);\r\n\r\n    const getKeywordsForCategory = (category) => {\r\n        const keywordsMap = {\r\n            'Диваны и кресла': ['диван', 'кресло', 'софа', 'канапе'],\r\n            'Шкафы и стеллажи': ['шкаф', 'стеллаж', 'гардероб', 'полка'],\r\n            'Кровати и матрасы': ['кровать', 'матрас', 'спальня', 'изголовье'],\r\n            'Тумбы и комоды': ['тумба', 'комод', 'прикроватная', 'туалетная'],\r\n            'Столы и стулья': ['стол', 'стул', 'табурет', 'обеденный'],\r\n            'Детская мебель': ['детск', 'ребенок', 'кроватка', 'игровой']\r\n        };     \r\n        return keywordsMap[category] || [category?.toLowerCase()];\r\n    };\r\n\r\n    const keywords = getKeywordsForCategory(decodedCategoryName);\r\n    const searchTermLower = searchTerm.toLowerCase();\r\n\r\n    const applyFilters = (products) => {\r\n        let result = [...products];\r\n        \r\n        if (filters.price !== null) {\r\n            result = result.filter(p => {\r\n                const productPrice = p.price || 0;\r\n                return productPrice <= filters.price;\r\n            });\r\n        }\r\n        if (filters.material) {\r\n            result = result.filter(p => p.material === filters.material);\r\n        }\r\n        if (filters.color) {\r\n            result = result.filter(p => p.color === filters.color);\r\n        }\r\n        if (filters.dimensions) {\r\n            result = result.filter(p => p.dimensions === filters.dimensions);\r\n        }\r\n        if (filters.availability !== null) {\r\n            result = result.filter(p => p.availability === filters.availability);\r\n        }\r\n        if (filters.brand) {\r\n            result = result.filter(p => p.brand === filters.brand);\r\n        }\r\n        if (filters.shop_id) {\r\n            result = result.filter(p => p.shop_id === filters.shop_id);\r\n        }\r\n        \r\n        return result;\r\n    };\r\n\r\n    const categoryFilteredProducts = products.filter(product => {\r\n        if (!product || !product.name) return false;\r\n        \r\n        const productNameLower = (product.name || '').toLowerCase();\r\n        const productDescLower = (product.description || '').toLowerCase();\r\n        const productCategoryLower = (product.category || '').toLowerCase();\r\n\r\n        const matchesCategory = keywords.some(keyword => \r\n            productNameLower.includes(keyword) || \r\n            productCategoryLower.includes(keyword)\r\n        );\r\n        const matchesSearch = searchTermLower === '' || \r\n        productNameLower.includes(searchTermLower) ||\r\n        productDescLower.includes(searchTermLower);\r\n\r\n        return matchesCategory && matchesSearch;\r\n    });\r\n\r\n    const fullyFilteredProducts = applyFilters(categoryFilteredProducts);\r\n\r\n    return (\r\n        <div className=\"category-page\">\r\n            <h2>Категория: {decodedCategoryName}</h2>\r\n            {categoryFilteredProducts.length > 0 ? (\r\n                <ProductList\r\n                    products={fullyFilteredProducts}\r\n                    currentUser={currentUser}\r\n                    favorites={favorites}\r\n                    toggleFavorite={toggleFavorite}\r\n                />\r\n            ) : (\r\n                <p>Нет товаров в данной категории.</p>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CategoryPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}