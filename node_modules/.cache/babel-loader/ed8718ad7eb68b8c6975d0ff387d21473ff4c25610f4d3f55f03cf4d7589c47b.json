{"ast":null,"code":"import React,{useState,useEffect}from'react';import Header from'./components/Header';import ProductList from'./components/ProductList';import Popup from'./components/popup';import'./App.css';import{BrowserRouter,Route,Routes,useNavigate}from'react-router-dom';import CategoryPage from'./components/CategoryPage';import FavoritesModal from'./components/FavouritesModal';import AdminPanel from'./components/AdminPanel';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AppContent(){const[products,setProducts]=useState([]);const[filteredProducts,setFilteredProducts]=useState([]);const[filters,setFilters]=useState({price:null,material:null,color:null,dimensions:null,availability:null,brand:null,shop_id:null});const[searchTerm,setSearchTerm]=useState('');const[isPopupOpen,setIsPopupOpen]=useState(false);const[isLoggedIn,setIsLoggedIn]=useState(()=>{return localStorage.getItem('isLoggedIn')==='true';});const[userRole,setUserRole]=useState(()=>{return localStorage.getItem('userRole')||null;});const[currentUser,setCurrentUser]=useState(()=>{const loggedIn=localStorage.getItem('isLoggedIn')==='true';const role=localStorage.getItem('userRole');return loggedIn&&role?{role}:null;});const[favorites,setFavorites]=useState(()=>{const saved=localStorage.getItem('favorites');return saved?JSON.parse(saved):[];});const[showFavorites,setShowFavorites]=useState(false);const[error,setError]=useState(null);const[loading,setLoading]=useState(true);const navigate=useNavigate();const[showAdminPanel,setShowAdminPanel]=useState(false);useEffect(()=>{const fetchData=async()=>{setLoading(true);try{const response=await fetch('http://localhost:5000/api/products');if(!response.ok){throw new Error(`HTTP error! Status: ${response.status}`);}const data=await response.json();// Перемешиваем продукты для случайного порядка\nconsole.log(filters);//////// USELESSSSSS\nsetProducts(shuffleArray(data));// Исправлено: сохраняем shuffledProducts\nsetFilteredProducts(shuffleArray(data));// Инициализируем filteredProducts\n// Перенаправляем на главную только если мы уже не на категории\nif(!window.location.pathname.includes('/category')){navigate('/',{replace:true});}}catch(error){setError(error);console.error(\"Error fetching data:\",error);// <---- Добавили console.error\n}finally{setLoading(false);}};fetchData();},[navigate]);useEffect(()=>{localStorage.setItem('isLoggedIn',isLoggedIn.toString());},[isLoggedIn]);useEffect(()=>{if(userRole){localStorage.setItem('userRole',userRole);}else{localStorage.removeItem('userRole');}},[userRole]);// Применение фильтров к данным\nuseEffect(()=>{let result=[...products];/// Фильтрация по цене\nif(filters.price!==null){result=result.filter(p=>{const productPrice=p.price||0;return productPrice<=filters.price;});}if(filters.material){result=result.filter(p=>p.material===filters.material);}if(filters.color){result=result.filter(p=>p.color===filters.color);}if(filters.dimensions){result=result.filter(p=>p.dimensions===filters.dimensions);}if(filters.availability!==null){result=result.filter(p=>p.availability===filters.availability);}if(filters.brand){result=result.filter(p=>p.brand===filters.brand);}if(filters.shop_id){result=result.filter(p=>p.shop_id===filters.shop_id);}// Фильтрация по поиску\nif(searchTerm){result=result.filter(p=>p.name.toLowerCase().includes(searchTerm.toLowerCase()));}setFilteredProducts(result);},[filters,searchTerm,products]);const handleFilterChange=newFilters=>{setFilters(prev=>({...prev,...newFilters}));};// (алгоритм Фишера-Йетса)\nconst shuffleArray=array=>{const newArray=[...array];for(let i=newArray.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[newArray[i],newArray[j]]=[newArray[j],newArray[i]];}return newArray;};const handleSearch=term=>{setSearchTerm(term);};const handleOpenPopup=()=>{setIsPopupOpen(true);};const handleClosePopup=()=>{setIsPopupOpen(false);};const handleLogin=async(username,role)=>{try{//console.log('Attempting login with:', username);\nconst response=await fetch('http://localhost:5000/api/auth',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username})});const data=await response.json();if(data.success){setIsLoggedIn(true);setCurrentUser({id:data.user.id,// Добавляем id пользователя\nusername,role:data.user.role});setUserRole(data.user.role);// Устанавливаем роль пользователя\nsetIsPopupOpen(false);}else{alert(data.message||'Authentication failed');}}catch(error){console.error('Auth error:',error);alert('Authentication failed');}};const handleRegister=async username=>{try{setIsLoggedIn(true);setCurrentUser({username,role:'user'});setUserRole('user');setIsPopupOpen(false);localStorage.setItem('isLoggedIn','true');console.log(`User ${username} registered successfully`);}catch(error){console.error('Registration error:',error);}};const handleLogout=()=>{setIsLoggedIn(false);setCurrentUser(null);// Важно сбросить currentUser\nsetUserRole(null);setFavorites([]);// Очищаем избранное при выходе\nlocalStorage.removeItem('isLoggedIn');localStorage.removeItem('userRole');localStorage.removeItem('favorites');};const handleOpenAdminPanel=()=>{setShowAdminPanel(true);};const handleCloseAdminPanel=()=>{setShowAdminPanel(false);};// Добавим функции для работы с избранным\nconst toggleFavorite=productId=>{setFavorites(prev=>{const newFavorites=prev.includes(productId)?prev.filter(id=>id!==productId):[...prev,productId];localStorage.setItem('favorites',JSON.stringify(newFavorites));return newFavorites;});};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error.message]});return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(Header,{onOpenPopup:isLoggedIn?handleLogout:handleOpenPopup,onSearch:handleSearch,onFilterChange:handleFilterChange,isLoggedIn:isLoggedIn,userRole:userRole,onShowFavorites:()=>setShowFavorites(true),onOpenAdminPanel:handleOpenAdminPanel}),/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(ProductList,{products:filteredProducts,currentUser:currentUser,favorites:favorites,toggleFavorite:toggleFavorite})}),/*#__PURE__*/_jsx(Route,{path:\"/category/:categoryName\",element:/*#__PURE__*/_jsx(CategoryPage,{products:products,searchTerm:searchTerm,loading:loading,error:error,currentUser:currentUser,favorites:favorites,toggleFavorite:toggleFavorite// Добавляем эту строку\n})})]})}),showFavorites&&/*#__PURE__*/_jsx(FavoritesModal,{show:showFavorites,onClose:()=>setShowFavorites(false),favorites:favorites,products:products,toggleFavorite:toggleFavorite// Важно передать эту функцию\n}),isPopupOpen&&/*#__PURE__*/_jsx(Popup,{isOpen:isPopupOpen,onClose:()=>handleClosePopup(),onLogin:handleLogin,onRegister:()=>handleRegister()}),showAdminPanel&&/*#__PURE__*/_jsx(AdminPanel,{onClose:handleCloseAdminPanel,currentUser:currentUser})]});}function App(){return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(AppContent,{})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Header","ProductList","Popup","BrowserRouter","Route","Routes","useNavigate","CategoryPage","FavoritesModal","AdminPanel","jsx","_jsx","jsxs","_jsxs","AppContent","products","setProducts","filteredProducts","setFilteredProducts","filters","setFilters","price","material","color","dimensions","availability","brand","shop_id","searchTerm","setSearchTerm","isPopupOpen","setIsPopupOpen","isLoggedIn","setIsLoggedIn","localStorage","getItem","userRole","setUserRole","currentUser","setCurrentUser","loggedIn","role","favorites","setFavorites","saved","JSON","parse","showFavorites","setShowFavorites","error","setError","loading","setLoading","navigate","showAdminPanel","setShowAdminPanel","fetchData","response","fetch","ok","Error","status","data","json","console","log","shuffleArray","window","location","pathname","includes","replace","setItem","toString","removeItem","result","filter","p","productPrice","name","toLowerCase","handleFilterChange","newFilters","prev","array","newArray","i","length","j","Math","floor","random","handleSearch","term","handleOpenPopup","handleClosePopup","handleLogin","username","method","headers","body","stringify","success","id","user","alert","message","handleRegister","handleLogout","handleOpenAdminPanel","handleCloseAdminPanel","toggleFavorite","productId","newFavorites","children","className","onOpenPopup","onSearch","onFilterChange","onShowFavorites","onOpenAdminPanel","path","element","show","onClose","isOpen","onLogin","onRegister","App"],"sources":["C:/Users/Yulia/OneDrive - Peter the Great St. Petersburg Polytechnical University/Рабочий стол/bound/OPD_site/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Header from './components/Header';\r\nimport ProductList from './components/ProductList';\r\nimport Popup from './components/popup';\r\nimport './App.css';\r\nimport { BrowserRouter, Route, Routes, useNavigate  } from 'react-router-dom';\r\nimport CategoryPage from './components/CategoryPage';\r\nimport FavoritesModal from './components/FavouritesModal';\r\nimport AdminPanel from './components/AdminPanel'; \r\n\r\n\r\nfunction AppContent() {\r\n  const [products, setProducts] = useState([]);\r\n  const [filteredProducts, setFilteredProducts] = useState([]);\r\n  const [filters, setFilters] = useState({\r\n    price: null,\r\n    material: null,\r\n    color: null,\r\n    dimensions: null,\r\n    availability: null,\r\n    brand: null,\r\n    shop_id: null\r\n  });\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [isPopupOpen, setIsPopupOpen] = useState(false);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(() => {\r\n    return localStorage.getItem('isLoggedIn') === 'true';\r\n  });\r\n  const [userRole, setUserRole] = useState(() => {\r\n    return localStorage.getItem('userRole') || null;\r\n  });\r\n  const [currentUser, setCurrentUser] = useState(() => {\r\n    const loggedIn = localStorage.getItem('isLoggedIn') === 'true';\r\n    const role = localStorage.getItem('userRole');\r\n    return loggedIn && role ? { role } : null;\r\n  });\r\n  const [favorites, setFavorites] = useState(() => {\r\n    const saved = localStorage.getItem('favorites');\r\n    return saved ? JSON.parse(saved) : [];\r\n  });\r\n  const [showFavorites, setShowFavorites] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n  const [showAdminPanel, setShowAdminPanel] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const response = await fetch('http://localhost:5000/api/products');\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! Status: ${response.status}`);\r\n        }\r\n        const data = await response.json();\r\n        // Перемешиваем продукты для случайного порядка\r\n        console.log(filters); //////// USELESSSSSS\r\n        setProducts(shuffleArray(data)); // Исправлено: сохраняем shuffledProducts\r\n        setFilteredProducts(shuffleArray(data)); // Инициализируем filteredProducts\r\n        // Перенаправляем на главную только если мы уже не на категории\r\n        if (!window.location.pathname.includes('/category')) {\r\n          navigate('/', { replace: true });\r\n        }\r\n      } catch (error) {\r\n        setError(error);\r\n        console.error(\"Error fetching data:\", error); // <---- Добавили console.error\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [navigate]);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('isLoggedIn', isLoggedIn.toString());\r\n  }, [isLoggedIn]);\r\n  \r\n  useEffect(() => {\r\n    if (userRole) {\r\n      localStorage.setItem('userRole', userRole);\r\n    } else {\r\n      localStorage.removeItem('userRole');\r\n    }\r\n  }, [userRole]);\r\n\r\n  // Применение фильтров к данным\r\n  useEffect(() => {\r\n    let result = [...products];\r\n    \r\n    /// Фильтрация по цене\r\n    if (filters.price !== null) {\r\n      result = result.filter(p => {\r\n        const productPrice = p.price || 0;\r\n        return productPrice <= filters.price;\r\n      });\r\n    }\r\n    if (filters.material) {\r\n      result = result.filter(p => p.material === filters.material);\r\n    }\r\n    if (filters.color) {\r\n      result = result.filter(p => p.color === filters.color);\r\n    }\r\n    if (filters.dimensions) {\r\n      result = result.filter(p => p.dimensions === filters.dimensions);\r\n    }\r\n    if (filters.availability !== null) {\r\n      result = result.filter(p => p.availability === filters.availability);\r\n    }\r\n    if (filters.brand) {\r\n      result = result.filter(p => p.brand === filters.brand);\r\n    }\r\n    if (filters.shop_id) {\r\n      result = result.filter(p => p.shop_id === filters.shop_id);\r\n    }\r\n    \r\n    // Фильтрация по поиску\r\n    if (searchTerm) {\r\n      result = result.filter(p => \r\n        p.name.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n    }\r\n    \r\n    setFilteredProducts(result);\r\n  }, [filters, searchTerm, products]);\r\n\r\n  const handleFilterChange = (newFilters) => {\r\n    setFilters(prev => ({\r\n      ...prev,\r\n      ...newFilters\r\n    }));\r\n  };\r\n\r\n  // (алгоритм Фишера-Йетса)\r\n  const shuffleArray = (array) => {\r\n    const newArray = [...array];\r\n    for (let i = newArray.length - 1; i > 0; i--) {\r\n      const j = Math.floor(Math.random() * (i + 1));\r\n      [newArray[i], newArray[j]] = [newArray[j], newArray[i]];\r\n    }\r\n    return newArray;\r\n  };\r\n\r\n  const handleSearch = (term) => {setSearchTerm(term);};\r\n  const handleOpenPopup = () => {setIsPopupOpen(true);};\r\n  const handleClosePopup = () => {setIsPopupOpen(false);};\r\n\r\n  const handleLogin = async (username, role) => {\r\n    try {\r\n      //console.log('Attempting login with:', username);\r\n      const response = await fetch('http://localhost:5000/api/auth', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ username })\r\n      });\r\n      \r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setIsLoggedIn(true);\r\n        setCurrentUser({ \r\n          id: data.user.id, // Добавляем id пользователя\r\n          username, \r\n          role: data.user.role \r\n        });\r\n        setUserRole(data.user.role); // Устанавливаем роль пользователя\r\n        setIsPopupOpen(false);\r\n      } else {\r\n        alert(data.message || 'Authentication failed');\r\n      }\r\n    } catch (error) {\r\n      console.error('Auth error:', error);\r\n      alert('Authentication failed');\r\n    }\r\n  };\r\n\r\n  const handleRegister = async (username) => {\r\n    try {\r\n    setIsLoggedIn(true);\r\n    setCurrentUser({ username, role: 'user' });\r\n    setUserRole('user');\r\n    setIsPopupOpen(false);\r\n    localStorage.setItem('isLoggedIn', 'true');\r\n    console.log(`User ${username} registered successfully`);\r\n    } catch (error) {\r\n      console.error('Registration error:', error);\r\n    }\r\n  };\r\n  \r\n  const handleLogout = () => {\r\n    setIsLoggedIn(false);\r\n    setCurrentUser(null); // Важно сбросить currentUser\r\n    setUserRole(null);\r\n    setFavorites([]); // Очищаем избранное при выходе\r\n    localStorage.removeItem('isLoggedIn');\r\n    localStorage.removeItem('userRole');\r\n    localStorage.removeItem('favorites');\r\n  };\r\n\r\n  const handleOpenAdminPanel = () => {\r\n    setShowAdminPanel(true);\r\n  };\r\n\r\n  const handleCloseAdminPanel = () => {\r\n    setShowAdminPanel(false);\r\n  };\r\n\r\n  // Добавим функции для работы с избранным\r\n  const toggleFavorite = (productId) => {\r\n    setFavorites(prev => {\r\n      const newFavorites = prev.includes(productId)\r\n        ? prev.filter(id => id !== productId)\r\n        : [...prev, productId];\r\n      localStorage.setItem('favorites', JSON.stringify(newFavorites));\r\n      return newFavorites;\r\n    });\r\n  };\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n  if (error)return <div>Error: {error.message}</div>;\r\n\r\n  return (\r\n    <div className=\"app-container\">\r\n      <Header\r\n        onOpenPopup={isLoggedIn ? handleLogout : handleOpenPopup}\r\n        onSearch={handleSearch}\r\n        onFilterChange={handleFilterChange}\r\n        isLoggedIn={isLoggedIn}\r\n        userRole={userRole}\r\n        onShowFavorites={() => setShowFavorites(true)}\r\n        onOpenAdminPanel={handleOpenAdminPanel}\r\n      />\r\n      <div className=\"main-content\">\r\n        <Routes>\r\n          <Route path=\"/\" element={            \r\n            <ProductList \r\n              products={filteredProducts}\r\n              currentUser={currentUser}\r\n              favorites={favorites}\r\n              toggleFavorite={toggleFavorite}\r\n             />\r\n            } />\r\n          <Route \r\n            path=\"/category/:categoryName\" \r\n            element={\r\n              <CategoryPage \r\n                products={products} \r\n                searchTerm={searchTerm} \r\n                loading={loading}\r\n                error={error}\r\n                currentUser={currentUser}\r\n                favorites={favorites}\r\n                toggleFavorite={toggleFavorite}  // Добавляем эту строку\r\n              />\r\n            } \r\n          />\r\n        </Routes>\r\n      </div>\r\n      {showFavorites && (\r\n        <FavoritesModal \r\n          show={showFavorites}\r\n          onClose={() => setShowFavorites(false)}\r\n          favorites={favorites}\r\n          products={products}\r\n          toggleFavorite={toggleFavorite}  // Важно передать эту функцию\r\n        />\r\n      )}\r\n      {isPopupOpen && (\r\n        <Popup\r\n          isOpen={isPopupOpen}\r\n          onClose={() => handleClosePopup()}\r\n          onLogin={handleLogin}\r\n          onRegister={() => handleRegister()}\r\n        />\r\n      )}\r\n      {showAdminPanel && (\r\n          <AdminPanel\r\n            onClose={handleCloseAdminPanel}\r\n            currentUser={currentUser}\r\n          />\r\n        )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction App() {\r\n  return (\r\n    <BrowserRouter>\r\n      <AppContent />\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}