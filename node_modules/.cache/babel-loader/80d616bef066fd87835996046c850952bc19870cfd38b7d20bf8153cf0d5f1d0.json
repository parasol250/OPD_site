{"ast":null,"code":"import React from'react';import'./FavouritesModal.css';import defaultImage from'./default-product-image.jpg';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FavoritesModal=_ref=>{let{show,onClose,favorites,products,toggleFavorite}=_ref;if(!show)return null;const favoriteProducts=products.filter(p=>favorites.includes(p.id));const getImageSource=product=>{if(product.image_paths){const pathsArray=Array.isArray(product.image_paths)?product.image_paths:String(product.image_paths).split(',').map(path=>path.trim());if(pathsArray.length>0){const firstPath=pathsArray[0];const cleanPath=firstPath.startsWith('full/')?firstPath.substring(5):firstPath;return`/images/full/${cleanPath}`;}}if(product.images&&product.images.length>0){return product.images[0];}return defaultImage;};return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0418\\u0437\\u0431\\u0440\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u044B\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:onClose,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"favorites-list\",children:favoriteProducts.length>0?favoriteProducts.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"favorite-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"favorite-image-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:getImageSource(product),alt:product.name,onError:e=>{e.target.src=defaultImage;}}),/*#__PURE__*/_jsx(\"button\",{className:\"remove-favorite\",onClick:()=>toggleFavorite(product.id),children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"favorite-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:product.name}),/*#__PURE__*/_jsx(\"p\",{children:product.price?`${product.price.toLocaleString('ru-RU')} руб.`:'Цена не указана'}),product.shop_name&&/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u041C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D: \",product.shop_name]}),product.original_url&&/*#__PURE__*/_jsx(\"a\",{href:product.original_url,target:\"_blank\",rel:\"noopener noreferrer\",className:\"shop-link\",children:\"\\u041F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438 \\u0432 \\u043C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\"})]})]},product.id)):/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0435\\u0442 \\u0438\\u0437\\u0431\\u0440\\u0430\\u043D\\u043D\\u044B\\u0445 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432\"})})]})});};export default FavoritesModal;","map":{"version":3,"names":["React","defaultImage","jsx","_jsx","jsxs","_jsxs","FavoritesModal","_ref","show","onClose","favorites","products","toggleFavorite","favoriteProducts","filter","p","includes","id","getImageSource","product","image_paths","pathsArray","Array","isArray","String","split","map","path","trim","length","firstPath","cleanPath","startsWith","substring","images","className","onClick","children","e","stopPropagation","src","alt","name","onError","target","price","toLocaleString","shop_name","original_url","href","rel"],"sources":["C:/Users/Yulia/OneDrive - Peter the Great St. Petersburg Polytechnical University/Рабочий стол/bound/OPD_site/src/components/FavouritesModal.js"],"sourcesContent":["import React from 'react';\r\nimport './FavouritesModal.css';\r\nimport defaultImage from './default-product-image.jpg';\r\n\r\n\r\n\r\nconst FavoritesModal = ({ \r\n  show, \r\n  onClose, \r\n  favorites, \r\n  products, \r\n  toggleFavorite \r\n}) => {\r\n  if (!show) return null;\r\n\r\n  const favoriteProducts = products.filter(p => favorites.includes(p.id));\r\n\r\n  const getImageSource = (product) => {\r\n    if (product.image_paths) {\r\n      const pathsArray = Array.isArray(product.image_paths) \r\n        ? product.image_paths \r\n        : String(product.image_paths).split(',').map(path => path.trim());\r\n      \r\n      if (pathsArray.length > 0) {\r\n        const firstPath = pathsArray[0];\r\n        const cleanPath = firstPath.startsWith('full/') \r\n          ? firstPath.substring(5) \r\n          : firstPath;\r\n        return `/images/full/${cleanPath}`;\r\n      }\r\n    }\r\n    \r\n    if (product.images && product.images.length > 0) {\r\n      return product.images[0];\r\n    }\r\n    \r\n    return defaultImage;\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal-overlay\" onClick={onClose}>\r\n      <div className=\"modal-content\" onClick={e => e.stopPropagation()}>\r\n        <h2>Избранные товары</h2>\r\n        <button className=\"close-button\" onClick={onClose}>×</button>\r\n        <div className=\"favorites-list\">\r\n          {favoriteProducts.length > 0 ? (\r\n            favoriteProducts.map(product => (\r\n              <div key={product.id} className=\"favorite-item\">\r\n                <div className=\"favorite-image-container\">\r\n                  <img \r\n                    src={getImageSource(product)} \r\n                    alt={product.name}\r\n                    onError={(e) => {\r\n                      e.target.src = defaultImage;\r\n                    }}\r\n                  />\r\n                  <button \r\n                    className=\"remove-favorite\"\r\n                    onClick={() => toggleFavorite(product.id)}\r\n                  >\r\n                    Удалить\r\n                  </button>\r\n                </div>\r\n                <div className=\"favorite-info\">\r\n                  <h3>{product.name}</h3>\r\n                  <p>{product.price ? `${product.price.toLocaleString('ru-RU')} руб.` : 'Цена не указана'}</p>\r\n                  {product.shop_name && <p>Магазин: {product.shop_name}</p>}\r\n                  {product.original_url && (\r\n                    <a \r\n                      href={product.original_url} \r\n                      target=\"_blank\" \r\n                      rel=\"noopener noreferrer\"\r\n                      className=\"shop-link\"\r\n                    >\r\n                      Перейти в магазин\r\n                    </a>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <p>Нет избранных товаров</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FavoritesModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}