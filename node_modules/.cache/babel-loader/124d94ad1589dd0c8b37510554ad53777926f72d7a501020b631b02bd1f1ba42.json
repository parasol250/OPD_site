{"ast":null,"code":"//import React from 'react';\nimport{useParams}from'react-router-dom';import ProductList from'./ProductList';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CategoryPage=_ref=>{let{products,searchTerm,loading,error,currentUser,favorites,toggleFavorite,filters}=_ref;const{categoryName}=useParams();if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error.message]});}const decodedCategoryName=decodeURIComponent(categoryName);const getKeywordsForCategory=category=>{const keywordsMap={'Диваны и кресла':['диван','кресло','софа','канапе'],'Шкафы и стеллажи':['шкаф','стеллаж','гардероб','полка'],'Кровати и матрасы':['кровать','матрас','спальня','изголовье'],'Тумбы и комоды':['тумба','комод','прикроватная','туалетная'],'Столы и стулья':['стол','стул','табурет','обеденный'],'Детская мебель':['детск','ребенок','кроватка','игровой']};return keywordsMap[category]||[category===null||category===void 0?void 0:category.toLowerCase()];};const keywords=getKeywordsForCategory(decodedCategoryName);const searchTermLower=searchTerm.toLowerCase();const applyFilters=products=>{let result=[...products];if(filters.price!==null){result=result.filter(p=>{const productPrice=p.price||0;return productPrice<=filters.price;});}if(filters.material){result=result.filter(p=>p.material===filters.material);}if(filters.color){result=result.filter(p=>p.color===filters.color);}if(filters.dimensions){result=result.filter(p=>p.dimensions===filters.dimensions);}if(filters.availability!==null){result=result.filter(p=>p.availability===filters.availability);}if(filters.brand){result=result.filter(p=>p.brand===filters.brand);}if(filters.shop_id){result=result.filter(p=>p.shop_id===filters.shop_id);}return result;};const categoryFilteredProducts=products.filter(product=>{if(!product||!product.name)return false;const productNameLower=(product.name||'').toLowerCase();const productDescLower=(product.description||'').toLowerCase();const productCategoryLower=(product.category||'').toLowerCase();const matchesCategory=keywords.some(keyword=>productNameLower.includes(keyword)||productCategoryLower.includes(keyword));const matchesSearch=searchTermLower===''||productNameLower.includes(searchTermLower)||productDescLower.includes(searchTermLower);return matchesCategory&&matchesSearch;});const fullyFilteredProducts=applyFilters(categoryFilteredProducts);return/*#__PURE__*/_jsxs(\"div\",{className:\"category-page\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F: \",decodedCategoryName]}),categoryFilteredProducts.length>0?/*#__PURE__*/_jsx(ProductList,{products:fullyFilteredProducts,currentUser:currentUser,favorites:favorites,toggleFavorite:toggleFavorite}):/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0435\\u0442 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432 \\u0432 \\u0434\\u0430\\u043D\\u043D\\u043E\\u0439 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438.\"})]});};export default CategoryPage;","map":{"version":3,"names":["useParams","ProductList","jsx","_jsx","jsxs","_jsxs","CategoryPage","_ref","products","searchTerm","loading","error","currentUser","favorites","toggleFavorite","filters","categoryName","children","message","decodedCategoryName","decodeURIComponent","getKeywordsForCategory","category","keywordsMap","toLowerCase","keywords","searchTermLower","applyFilters","result","price","filter","p","productPrice","material","color","dimensions","availability","brand","shop_id","categoryFilteredProducts","product","name","productNameLower","productDescLower","description","productCategoryLower","matchesCategory","some","keyword","includes","matchesSearch","fullyFilteredProducts","className","length"],"sources":["C:/Users/Yulia/OneDrive - Peter the Great St. Petersburg Polytechnical University/Рабочий стол/bound/OPD_site/src/components/CategoryPage.js"],"sourcesContent":["//import React from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport ProductList from './ProductList';\r\n\r\nconst CategoryPage = ({ products, searchTerm, loading, error, currentUser, favorites, toggleFavorite, filters }) => {\r\n    const { categoryName } = useParams();\r\n\r\n    if (loading) {return <div>Loading...</div>;}\r\n    if (error) {return <div>Error: {error.message}</div>;}\r\n\r\n    const decodedCategoryName = decodeURIComponent(categoryName);\r\n\r\n    const getKeywordsForCategory = (category) => {\r\n        const keywordsMap = {\r\n            'Диваны и кресла': ['диван', 'кресло', 'софа', 'канапе'],\r\n            'Шкафы и стеллажи': ['шкаф', 'стеллаж', 'гардероб', 'полка'],\r\n            'Кровати и матрасы': ['кровать', 'матрас', 'спальня', 'изголовье'],\r\n            'Тумбы и комоды': ['тумба', 'комод', 'прикроватная', 'туалетная'],\r\n            'Столы и стулья': ['стол', 'стул', 'табурет', 'обеденный'],\r\n            'Детская мебель': ['детск', 'ребенок', 'кроватка', 'игровой']\r\n        };     \r\n        return keywordsMap[category] || [category?.toLowerCase()];\r\n    };\r\n\r\n    const keywords = getKeywordsForCategory(decodedCategoryName);\r\n    const searchTermLower = searchTerm.toLowerCase();\r\n\r\n    const applyFilters = (products) => {\r\n        let result = [...products];\r\n        \r\n        if (filters.price !== null) {\r\n            result = result.filter(p => {\r\n                const productPrice = p.price || 0;\r\n                return productPrice <= filters.price;\r\n            });\r\n        }\r\n        if (filters.material) {\r\n            result = result.filter(p => p.material === filters.material);\r\n        }\r\n        if (filters.color) {\r\n            result = result.filter(p => p.color === filters.color);\r\n        }\r\n        if (filters.dimensions) {\r\n            result = result.filter(p => p.dimensions === filters.dimensions);\r\n        }\r\n        if (filters.availability !== null) {\r\n            result = result.filter(p => p.availability === filters.availability);\r\n        }\r\n        if (filters.brand) {\r\n            result = result.filter(p => p.brand === filters.brand);\r\n        }\r\n        if (filters.shop_id) {\r\n            result = result.filter(p => p.shop_id === filters.shop_id);\r\n        }\r\n        \r\n        return result;\r\n    };\r\n\r\n    const categoryFilteredProducts = products.filter(product => {\r\n        if (!product || !product.name) return false;\r\n        \r\n        const productNameLower = (product.name || '').toLowerCase();\r\n        const productDescLower = (product.description || '').toLowerCase();\r\n        const productCategoryLower = (product.category || '').toLowerCase();\r\n\r\n        const matchesCategory = keywords.some(keyword => \r\n            productNameLower.includes(keyword) || \r\n            productCategoryLower.includes(keyword)\r\n        );\r\n        const matchesSearch = searchTermLower === '' || \r\n        productNameLower.includes(searchTermLower) ||\r\n        productDescLower.includes(searchTermLower);\r\n\r\n        return matchesCategory && matchesSearch;\r\n    });\r\n\r\n    const fullyFilteredProducts = applyFilters(categoryFilteredProducts);\r\n\r\n    return (\r\n        <div className=\"category-page\">\r\n            <h2>Категория: {decodedCategoryName}</h2>\r\n            {categoryFilteredProducts.length > 0 ? (\r\n                <ProductList\r\n                    products={fullyFilteredProducts}\r\n                    currentUser={currentUser}\r\n                    favorites={favorites}\r\n                    toggleFavorite={toggleFavorite}\r\n                />\r\n            ) : (\r\n                <p>Нет товаров в данной категории.</p>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CategoryPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}